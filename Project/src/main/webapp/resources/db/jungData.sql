
-- user 임시용 3개 (트레이너)
INSERT INTO USERS values (10, 'user10@xxx.xxx', '1111', 1, SYSDATE, SYSDATE, 1, 1, 0, 'naver', '머슬맨', '잘부탁드려요', 'profile10', 1992, 01, 01, 0, 0);
INSERT INTO USERS values (11, 'user11@xxx.xxx', '1111', 1, SYSDATE, SYSDATE, 2, 2, 0, 'naver', '근육걸', '잘부탁드려요', 'profile11', 2000, 12, 31, 1, 1);
INSERT INTO USERS values (12, 'user12@xxx.xxx', '1111', 2, SYSDATE, SYSDATE, 3, 3, 0, 'naver', '헬스맨', '잘부탁드려요', 'profile12', 2000, 12, 31, 2, 1);
INSERT INTO USERS values (13, 'user13@xxx.xxx', '1111', 2, SYSDATE, SYSDATE, 3, 3, 0, 'naver', '술맨', '잘부탁드려요', 'profile12', 2000, 12, 31, 2, 1);

-- 클래스 생성 
INSERT INTO MEETING values (1, 11, 10, 6, 0, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '족구합시다.', '족구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (2, 12, 8, 4, 3, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '볼링합시다.', '볼링하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (3, 13, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (5, 12, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (6, 12, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (7, 12, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (8, 13, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (9, 13, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (10, 13, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (11, 13, 12, 10, 2, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (12, 12, 12, 10, 2, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (13, 12, 12, 10, 3, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (14, 13, 12, 10, 2, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (15, 12, 12, 10, 2, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (16, 13, 12, 10, 4, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (17, 12, 12, 10, 5, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (18, 13, 12, 10, 6, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (19, 12, 12, 10, 2, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (20, 10, 12, 10, 3, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (21, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (22, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (23, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (24, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (25, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (26, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (27, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (28, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (29, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (30, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (31, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (32, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (33, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (34, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (35, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (36, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);
INSERT INTO MEETING values (37, 10, 12, 10, 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE, 1, 1, '축구합시다.', '축구하면 얼마나 좋게요~!? 다같이 합시다.', 0, null, 0, null, 0);


SELECT * FROM USERS;

DELETE FROM MEETING;
SELECT * FROM MEETING;
SELECT * FROM EXERCISE;
SELECT * FROM PHOTO;


SELECT COUNT(*)
			FROM MEETING M, EXERCISE E
			WHERE M.EXERCISE_NO = E.EXERCISE_NO
			AND (E.EXERCISE_NAME LIKE '%축구%'
			OR M.MEETING_TITLE LIKE '%축구%');


SELECT COUNT(*)
		 FROM MEETING M, USERS U
		WHERE M.USER_NO = U.USER_NO
		   AND U.USER_SEPARATOR = 1

select * from meeting m, EXERCISE E, PHOTO P, (SELECT * FROM USERS WHERE USER_SEPARATOR = 1) u where m.user_no = u.user_no and M.MEETING_NO = P.PHOTO_REFERER_NO and M.EXERCISE_NO = E.EXERCISE_NO;
select a.*, rownum as rn from (select * from meeting m, EXERCISE E, PHOTO P, (SELECT * FROM USERS WHERE USER_SEPARATOR = 1) u where m.user_no = u.user_no and M.MEETING_NO = P.PHOTO_REFERER_NO and M.EXERCISE_NO = E.EXERCISE_NO) a;

 SELECT M.USER_NO FROM MEETING M inner join USERS U
 on M.USER_NO = U.USER_NO;

 SELECT * FROM MEETING;
 SELECT * FROM USERS;


SELECT B2.* 
		 FROM (SELECT ROWNUM RN, B1.*
			         FROM (SELECT m.meeting_no, e.exercise_no, u.user_no, p.PHOTO_REFERER_NO
				              FROM	MEETING M, EXERCISE E, (SELECT * FROM USERS WHERE USER_SEPARATOR = 1) U, PHOTO P
				              WHERE M.EXERCISE_NO = E.EXERCISE_NO
				                 AND M.USER_NO = U.USER_NO 
							     AND M.MEETING_NO = P.PHOTO_REFERER_NO) B1 ) B2
							
	SELECT B2.* 
		 FROM (SELECT ROWNUM RN, B1.*
			         FROM (SELECT M.MEETING_NO, M.MEETING_TITLE, M.MEETING_DATE, M.MEETING_HIT, E.EXERCISE_NAME, U.USER_NICKNAME, P.PHOTO_FILENAME 
				              FROM	MEETING M, EXERCISE E, (SELECT * FROM USERS WHERE USER_SEPARATOR = 1) U, PHOTO P
				              WHERE M.EXERCISE_NO = E.EXERCISE_NO
				                 AND M.USER_NO = U.USER_NO 
							     AND M.MEETING_NO = P.PHOTO_REFERER_NO) B1 ) B2
		WHERE B2.RN BETWEEN #{param1} AND #{param2}
							     
							     
							     
			SELECT * 
		FROM (SELECT ROWNUM RN, B1.*
			FROM (SELECT M.MEETING_NO, M.MEETING_TITLE, M.MEETING_DATE, M.MEETING_HIT, E.EXERCISE_NAME, U.USER_NICKNAME, P.PHOTO_FILENAME
						MEETING M1
					INNER JOIN EXERCISE E1
						ON E1.EXERCISE_NO = M1.EXERCISE_NO
					INNER JOIN USERS U
						ON M1.USER_NO = U.USER_NO
					INNER JOIN PHOTO P
						ON M1.MEETING_NO = P.PHOTO_REFERER_NO) B1 ) B2
		WHERE B2.RN BETWEEN #{param1} AND #{param2}
		AND (M.MEETING_TITLE LIKE '%'||#{param3}||'%' OR
		E.EXERCISE_NAME LIKE '%'||#{param3}||'%');			   
		
		
		SELECT B2.* 
		FROM (SELECT ROWNUM RN, B1.*
			FROM (SELECT *
					  FROM MEETING M
					INNER JOIN EXERCISE E
						ON E.EXERCISE_NO = M.EXERCISE_NO
					INNER JOIN USERS U
						ON M.USER_NO = U.USER_NO
					INNER JOIN PHOTO P
						ON M.MEETING_NO = P.PHOTO_REFERER_NO) B1 ) B2
		WHERE (MEETING_TITLE LIKE '%축구%' OR
		EXERCISE_NAME LIKE '%축구%');
							     
			 SELECT COUNT(*)
		FROM MEETING M, EXERCISE E
		WHERE E.EXERCISE_NO = M.EXERCISE_NO
		AND EXERCISE_NAME LIKE '족구'
		
		SELECT COUNT(*)
		FROM MEETING M, EXERCISE E
		WHERE E.EXERCISE_NO = M.EXERCISE_NO
		AND EXERCISE_NAME LIKE '명상'
		
		SELECT *
		FROM MEETING M, EXERCISE E
		WHERE E.EXERCISE_NO = M.EXERCISE_NO
		AND EXERCISE_NAME LIKE '농구'
							     
							     
							     SELECT COUNT(*) FROM MEETING
							     
							     
							  SELECT *
		FROM MEETING M, EXERCISE E
		WHERE E.EXERCISE_NO = M.EXERCISE_NO
		AND EXERCISE_NAME LIKE '볼링'   
							     
		
		SELECT * 
		FROM (SELECT ROWNUM RN, B1.*
			FROM (SELECT *
					  FROM MEETING M
					FULL OUTER JOIN EXERCISE E
						ON E.EXERCISE_NO = M.EXERCISE_NO
					FULL OUTER JOIN USERS U
						ON M.USER_NO = U.USER_NO
					FULL OUTER JOIN PHOTO P
						ON M.MEETING_NO = P.PHOTO_REFERER_NO 
												WHERE E.EXERCISE_NAME = '족구') B1 ) B2

		WHERE RN BETWEEN 1 AND 10
		
		
		SELECT * 
		FROM (SELECT ROWNUM RN, B1.*
			FROM (SELECT * FROM
						MEETING M1
					FULL OUTER JOIN EXERCISE E1
						ON E1.EXERCISE_NO = M1.EXERCISE_NO
					FULL OUTER JOIN USERS U
						ON M1.USER_NO = U.USER_NO
					FULL OUTER JOIN PHOTO P
						ON M1.MEETING_NO = P.PHOTO_REFERER_NO
						WHERE MEETING_NO IS NOT NULL) B1 ) B2
		WHERE RN BETWEEN 1 AND 100
		
		
		SELECT *
		FROM MEETING
		
		SELECT * FROM PHOTO
		SELECT * FROM EXERCISE
		SELECT * FROM USERS
							     
		
		SELECT * 
		FROM (SELECT ROWNUM RN, B1.*
			FROM (SELECT * FROM
						MEETING M1
					FULL OUTER JOIN EXERCISE E1
						ON E1.EXERCISE_NO = M1.EXERCISE_NO
					FULL OUTER JOIN USERS U
						ON M1.USER_NO = U.USER_NO
					FULL OUTER JOIN PHOTO P
						ON M1.MEETING_NO = P.PHOTO_REFERER_NO
						WHERE MEETING_NO IS NOT NULL
						AND USER_SEPARATOR = 1) B1 ) B2
		WHERE B2.RN BETWEEN 1 AND 100
		
		
		SELECT COUNT(*)
		 FROM MEETING M, USERS U
		WHERE M.USER_NO = U.USER_NO
		   AND U.USER_SEPARATOR = 1
							     
							     


